function displayCharts(){$("#ratingChart").onScreen()&&displayMoviesByRating(),$("#yearChart").onScreen()&&displayMoviesByDecade(),$("#formatChart").onScreen()&&displayMoviesByFormat(),displayMoviesByCertificate(),$("#genreChart").onScreen()&&displayMoviesByGenre()}function displayMoviesByDecade(){$('#decadeSelectFilter option[value="all"]').prop("selected",!0),runDecade===!0&&$.ajax({beforeSend:function(){runDecade=!1},type:"POST",url:"movieDecadeCount",data:{_token:$('meta[name="_token"]').attr("content")}}).done(function(e){var a=new CanvasJS.Chart("yearChart",{axisY:{gridColor:"#ddd",gridThickness:1},animationEnabled:!0,animationDuration:1500,toolTip:{enabled:!1},data:[{type:"column",dataPoints:e,indexLabelPlacement:"outside",indexLabelOrientation:"horizontal",indexLabel:"{y}",click:function(e){displayMoviesByYear(e.dataPoint.label,e.dataPoint.label+9),$('#decadeSelectFilter option[value="'+e.dataPoint.label+'"]').prop("selected",!0)}}]});a.render()})}function displayMoviesByYear(e,a){$.ajax({type:"POST",url:"movieYearCount",data:{_token:$('meta[name="_token"]').attr("content"),start:e,end:a}}).done(function(e){$("#movies-by-label").html("Movies By Year");var a=new CanvasJS.Chart("yearChart",{axisY:{gridColor:"#ddd",gridThickness:1,interval:e.interval},animationEnabled:!0,animationDuration:1500,toolTip:{enabled:!1},data:[{type:"column",dataPoints:e.years,indexLabelPlacement:"outside",indexLabelOrientation:"horizontal",indexLabel:"{y}",click:function(e){startFilter("year",e.dataPoint.label)}}]});a.render()})}function displayMoviesByFormat(){runFormat===!0&&$.ajax({beforeSend:function(){runFormat=!1},type:"POST",url:"movieFormatCount",data:{_token:$('meta[name="_token"]').attr("content")}}).done(function(e){var a=new CanvasJS.Chart("formatChart",{toolTip:{enabled:!1},animationEnabled:!0,data:[{type:"doughnut",dataPoints:e,click:function(e){}}]});a.render()})}function displayMoviesByCertificate(){runCertif===!0&&$.ajax({beforeSend:function(){runCertif=!1},type:"POST",url:"movieCertificateCount",data:{_token:$('meta[name="_token"]').attr("content")}}).done(function(e){var a=new CanvasJS.Chart("certificateChart",{colorSet:"cert",animationEnabled:!0,toolTip:{contentFormatter:function(e){for(var a="",t=0;t<e.entries.length;t++)return a=1==e.entries[t].dataPoint.y?"1 movie":e.entries[t].dataPoint.y+" movies"}},data:[{type:"doughnut",startAngle:270,dataPoints:e,click:function(e){}}]});a.render()})}function displayMoviesByGenre(){runGenre===!0&&$.ajax({beforeSend:function(){runGenre=!1},type:"POST",url:"movieGenreCount",data:{_token:$('meta[name="_token"]').attr("content")}}).done(function(e){var a=new CanvasJS.Chart("genreChart",{animationEnabled:!0,axisX:{interval:1,labelFontSize:12},axisY:{interval:10,maximum:250,labelFontSize:12,gridColor:"#ddd",gridThickness:1},toolTip:{contentFormatter:function(e){for(var a="",t=0;t<e.entries.length;t++)return a=1==e.entries[t].dataPoint.y?"1 movie":e.entries[t].dataPoint.y+" movies"}},data:[{type:"bar",dataPoints:e,click:function(e){}}]});a.render()})}function displayMoviesByRating(){runRating===!0&&$.ajax({beforeSend:function(){runRating=!1},type:"POST",url:"movieRatingCount",data:{_token:$('meta[name="_token"]').attr("content")}}).done(function(e){var a=new CanvasJS.Chart("ratingChart",{axisY:{gridColor:"#ddd",gridThickness:1,interval:10},animationEnabled:!0,animationDuration:1500,toolTip:{enabled:!1},data:[{type:"column",startAngle:270,dataPoints:e,indexLabelPlacement:"outside",indexLabelOrientation:"horizontal",indexLabel:"{y}",click:function(e){}}]});a.render()})}$.fn.onScreen=function(){return $(this).length?$(window).scrollTop()+$(window).height()>=$(this).offset().top+100:!1},CanvasJS.addColorSet("cert",["#6bc954","#158b1a","#e6dd19","#d9a125","#c1277e","#d43030","#460000"]);var runRating=!0,runDecade=!0,runCertif=!0,runGenre=!0,runFormat=!0;$(document).resize(function(e){$("#actor-slidee, #director-slidee").sly("reload")}),$(document).scroll(function(){displayCharts()}),$(document).ready(function(){$("#decadeSelectFilter").change(function(){var e=$(this).val();if("all"!==e){var a=parseInt(e),t=a+9;displayMoviesByYear(a,t)}else runDecade=!0,displayMoviesByDecade()}),$(".slick-purchased").slick({speed:800,dots:!1,arrows:!1,autoplay:!0,infinite:!0,slidesToShow:7,slidesToScroll:1,swipeToSlide:!0,pauseOnHover:!0,autoplaySpeed:3e3,responsive:[{breakpoint:1200,settings:{slidesToShow:6}},{breakpoint:992,settings:{slidesToShow:5}},{breakpoint:768,settings:{slidesToShow:4}},{breakpoint:400,settings:{slidesToShow:2}}]}).hide().removeClass("hide").fadeIn(),$("#actor-slidee").sly({speed:560,dragHandle:1,horizontal:1,releaseSwing:1,itemNav:"basic",touchDragging:1,mouseDragging:1,activateOn:"click",activatePageOn:"click",pagesBar:"#actor-pages",dragSource:"#actor-slidee",pageBuilder:function(e){return"<li>"+(e+1)+"</li>"}}),$("#director-slidee").sly({speed:600,dragHandle:1,horizontal:1,releaseSwing:1,mouseDragging:1,touchDragging:1,itemNav:"basic",activateOn:"click",activatePageOn:"click",pagesBar:"#director-pages",dragSource:"#director-slidee",pageBuilder:function(e){return"<li>"+(e+1)+"</li>"}}),displayCharts()});
